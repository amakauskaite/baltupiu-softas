CREATE TABLE IF NOT EXISTS ADMINISTRATOR
(ID INT NOT NULL AUTO_INCREMENT,
USERNAME VARCHAR(25) NOT NULL UNIQUE,
PASSWORD VARCHAR(25) NOT NULL,
PRIMARY KEY(ID));

CREATE TABLE IF NOT EXISTS CATEGORY
(
  ID INT NOT NULL AUTO_INCREMENT,
  NAME VARCHAR(50) NOT NULL,
  PRIMARY KEY(ID)
);

CREATE TABLE IF NOT EXISTS PURCHASE_HISTORY
(ID INT NOT NULL AUTO_INCREMENT,
 STATUS VARCHAR(25) NOT NULL,
 PURCHASE_DATE DATE NOT NULL,
  PRIMARY KEY(ID));

CREATE TABLE IF NOT EXISTS USER_ADDRESS
(
  ID INT NOT NULL AUTO_INCREMENT,
  COUNTRY VARCHAR(25),
  CITY VARCHAR(25),
  STREET VARCHAR(25),
  HOUSE VARCHAR(4),
  FLAT INT,
  POSTCODE INT,
  PRIMARY KEY (ID)
);

CREATE TABLE IF NOT EXISTS ITEM 
(ID INT NOT NULL AUTO_INCREMENT,
SKU VARCHAR(50)  NOT NULL UNIQUE,
NAME VARCHAR(50) NOT NULL,
PRICE INT,
SUMMARY VARCHAR(256),
PHOTO VARCHAR(256),
CATEGORY_ID INT NOT NULL UNIQUE,
MODIFICATION_DATE DATE,
STATUS VARCHAR(25) NOT NULL,
PRIMARY KEY(ID),
FOREIGN  KEY (CATEGORY_ID) REFERENCES CATEGORY(ID));

CREATE TABLE IF NOT EXISTS PURCHASED_ITEMS
(PURCHASE_ID INT NOT NULL,
ITEM_ID INT NOT NULL,
AMOUNT INT NOT NULL,
PRIMARY KEY (PURCHASE_ID, ITEM_ID),
FOREIGN KEY (PURCHASE_ID) REFERENCES PURCHASE_HISTORY (ID),
FOREIGN KEY (ITEM_ID) REFERENCES ITEM (ID)
);

CREATE TABLE IF NOT EXISTS USER
(
ID INT NOT NULL AUTO_INCREMENT,
EMAIL VARCHAR(50) NOT NULL UNIQUE,
FIRSTNAME VARCHAR(25),
LASTNAME VARCHAR(25),
PASSWORD VARCHAR(25),
ADDRESS_ID INT,
PHONE_NUMBER INT,
IS_BLOCKED BOOLEAN,
PRIMARY KEY (ID),
FOREIGN KEY (ADDRESS_ID) REFERENCES USER_ADDRESS(ID)
);

CREATE TABLE IF NOT EXISTS CART
(
USER_ID INT NOT NULL,
ITEM_ID INT NOT NULL,
AMOUNT INT,
PRIMARY KEY (USER_ID, ITEM_ID),
FOREIGN KEY (USER_ID) REFERENCES USER (ID),
FOREIGN KEY (ITEM_ID) REFERENCES ITEM (ID)
);